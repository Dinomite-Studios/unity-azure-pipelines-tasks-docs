(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{141:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/unity-test-classic-5c4fba7ca836550c319660397b4313b5.png"},142:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/unity-test-log-06948efa6e82ac529cbc41633510d433.png"},82:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return l})),n.d(t,"metadata",(function(){return o})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return c}));var a=n(3),i=n(8),r=(n(0),n(92)),l={id:"unity-test-task",title:"Unity Test"},o={unversionedId:"unity-test-task",id:"unity-test-task",isDocsHomePage:!1,title:"Unity Test",description:"About",source:"@site/docs/unity-test-task.md",slug:"/unity-test-task",permalink:"/docs/unity-test-task",editUrl:"https://github.com/Dinomite-Studios/unity-azure-pipelines-tasks-docs/edit/development/docs/unity-test-task.md",version:"current",sidebar:"docsSidebar",previous:{title:"Unity Activate License",permalink:"/docs/unity-activate-license-task"},next:{title:"Unity CMD",permalink:"/docs/unity-cmd-task"}},s=[{value:"About",id:"about",children:[]},{value:"Inputs",id:"inputs",children:[{value:"testMode",id:"testmode",children:[]},{value:"unityEditorsPathMode",id:"unityeditorspathmode",children:[]},{value:"customUnityEditorsPath",id:"customunityeditorspath",children:[]},{value:"unityProjectPath",id:"unityprojectpath",children:[]},{value:"testCategory",id:"testcategory",children:[]},{value:"testFilter",id:"testfilter",children:[]},{value:"batchMode",id:"batchmode",children:[]},{value:"acceptApiUpdate",id:"acceptapiupdate",children:[]},{value:"noPackageManager",id:"nopackagemanager",children:[]},{value:"testResultsPath",id:"testresultspath",children:[]},{value:"additionalCmdArgs",id:"additionalcmdargs",children:[]}]},{value:"Outputs",id:"outputs",children:[{value:"testResultsOutputPathAndFileName",id:"testresultsoutputpathandfilename",children:[]},{value:"logsOutputPath",id:"logsoutputpath",children:[]}]},{value:"How to use",id:"how-to-use",children:[{value:"YAML",id:"yaml",children:[]},{value:"Classic Pipeline Editor",id:"classic-pipeline-editor",children:[]}]},{value:"Log",id:"log",children:[]}],u={toc:s};function c(e){var t=e.components,l=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},u,l,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"about"},"About"),Object(r.b)("p",null,"This task is used for running unit tests in your project. Test results will output into a test results file and the file path is provided for uploading and processing. You can find the task when editing your pipeline by searching for the name ",Object(r.b)("inlineCode",{parentName:"p"},"Unity Test"),"."),Object(r.b)("hr",null),Object(r.b)("h2",{id:"inputs"},"Inputs"),Object(r.b)("p",null,"This task supports input variables for configuration."),Object(r.b)("h3",{id:"testmode"},"testMode"),Object(r.b)("p",null,"The mode you want to run tests in."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Required"),": Yes"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Default Value"),": editMode"),Object(r.b)("h4",{id:"options"},"Options:"),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Value"),Object(r.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"editMode"),Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Runs tests in edit mode, edit mode tests include the Unity Editor assembly and APIs.")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"playMode"),Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Runs tests in play mode.")))),Object(r.b)("h3",{id:"unityeditorspathmode"},"unityEditorsPathMode"),Object(r.b)("p",null,"For the task to run successfully it needs to know where Unity installations are located at on the agent. This input lets you configure,\nwhere the task should look for installations."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Required"),": Yes"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Default Value"),": unityHub"),Object(r.b)("h4",{id:"options-1"},"Options:"),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Value"),Object(r.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"unityHub"),Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Uses the Unity Hub default installation path.")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"environmentVariable"),Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Expects an environment variable ",Object(r.b)("inlineCode",{parentName:"td"},"UNITYHUB_EDITORS_FOLDER_LOCATION")," to exist on the agent and specifying where to find editor installations.")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"specify"),Object(r.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Let's you specify a custom path where to lookup editor installations using the input ",Object(r.b)("inlineCode",{parentName:"td"},"customUnityEditorsPath"),".")))),Object(r.b)("h3",{id:"customunityeditorspath"},"customUnityEditorsPath"),Object(r.b)("p",null,"If you are using a custom buld agent you may want to specify a custom path to specify where to look for Unity installations. This input lets you do that.\nMake sure to set ",Object(r.b)("inlineCode",{parentName:"p"},"unityEditorsPathMode")," to ",Object(r.b)("inlineCode",{parentName:"p"},"specify")," for this input to take effect."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Required"),": Yes, if ",Object(r.b)("inlineCode",{parentName:"p"},"unityEditorsPathMode")," set to ",Object(r.b)("inlineCode",{parentName:"p"},"specify")),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Default Value"),": -"),Object(r.b)("h3",{id:"unityprojectpath"},"unityProjectPath"),Object(r.b)("p",null,"Enter the directory path to the Unity project. If no value is entered, the project is assumed to be in the repository root."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Required"),": No"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Default Value"),": -"),Object(r.b)("h3",{id:"testcategory"},"testCategory"),Object(r.b)("p",null,"A semicolon-separated list of test categories to include in the run. If using both testFilter and testCategory, then tests only run that matches both."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Required"),": No"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Default Value"),": -"),Object(r.b)("h3",{id:"testfilter"},"testFilter"),Object(r.b)("p",null,"A semicolon-separated list of test names to run, or a regular expression pattern to match tests by their full name."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Required"),": No"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Default Value"),": -"),Object(r.b)("h3",{id:"batchmode"},"batchMode"),Object(r.b)("p",null,"If set, Unity runs in batch mode and disables any UI and popups to fully eliminate the need for human intervention. Note that you cannot use batch mode when testing UI."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Required"),": No"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Default Value"),": true"),Object(r.b)("h3",{id:"acceptapiupdate"},"acceptApiUpdate"),Object(r.b)("p",null,"If set, the Unity API updater will run before running tests and update any obsolete API usage."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Required"),": No"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Default Value"),": false"),Object(r.b)("h3",{id:"nopackagemanager"},"noPackageManager"),Object(r.b)("p",null,"If set, the Unity Package Manager is disabled for the time of task execution."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Required"),": No"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Default Value"),": false"),Object(r.b)("h3",{id:"testresultspath"},"testResultsPath"),Object(r.b)("p",null,"Tells the task where to output test results. Path can be relative to repository root or absolute."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Required"),": No"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Default Value"),": Test Results"),Object(r.b)("h3",{id:"additionalcmdargs"},"additionalCmdArgs"),Object(r.b)("p",null,"Specify command line arguments to pass to the Unity process when running the task."),Object(r.b)("div",{className:"admonition admonition-warning alert alert--danger"},Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-heading"}),Object(r.b)("h5",{parentName:"div"},Object(r.b)("span",Object(a.a)({parentName:"h5"},{className:"admonition-icon"}),Object(r.b)("svg",Object(a.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(r.b)("path",Object(a.a)({parentName:"svg"},{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})))),"warning")),Object(r.b)("div",Object(a.a)({parentName:"div"},{className:"admonition-content"}),Object(r.b)("p",{parentName:"div"},"Many command line arguments the build task will already set for you. If you find you are missing any advanced or custom command line arguments, only then you should\nspecify them using this input. For most use cases and projects you will not need to add any additional command line arguments."))),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Required"),": No"),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Default Value"),": -"),Object(r.b)("h4",{id:"options-2"},"Options:"),Object(r.b)("p",null,"Check the official ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://docs.unity3d.com/Manual/CommandLineArguments.html"}),"Unity command line documentation")," for options."),Object(r.b)("hr",null),Object(r.b)("h2",{id:"outputs"},"Outputs"),Object(r.b)("p",null,"This task provides output variables."),Object(r.b)("h3",{id:"testresultsoutputpathandfilename"},"testResultsOutputPathAndFileName"),Object(r.b)("p",null,"Path and File name of the test results in XML format."),Object(r.b)("h3",{id:"logsoutputpath"},"logsOutputPath"),Object(r.b)("p",null,"Path to the Unity editor log files generated while executing the task. Use this e.g. to upload logs in case of a failure."),Object(r.b)("hr",null),Object(r.b)("h2",{id:"how-to-use"},"How to use"),Object(r.b)("p",null,"Here's a simple example of how to use and define the task in your pipeline. For more examples, check the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/examples"}),"Examples Collection"),"."),Object(r.b)("h3",{id:"yaml"},"YAML"),Object(r.b)("p",null,"In the simple YAML example below we are definiing the task a step in the pipeilne using ",Object(r.b)("inlineCode",{parentName:"p"},"- task: UnityTestTask@1"),". We are also giving the task a reference name using ",Object(r.b)("inlineCode",{parentName:"p"},"name: unitytest"),", so we can use it to refernce the output variables of the task in other tasks of the pipeline. E.g. we can output the value of the ",Object(r.b)("inlineCode",{parentName:"p"},"testResultsOutputPathAndFileName")," output variable to the console using ",Object(r.b)("inlineCode",{parentName:"p"},"echo $(unitytest.testResultsOutputPathAndFileName)"),". For ",Object(r.b)("inlineCode",{parentName:"p"},"testMode")," we specify that we want to run in ",Object(r.b)("inlineCode",{parentName:"p"},"editMode"),". Everything else we are leaving at the defaults."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-yaml"}),"trigger:\n- main\n\npool:\n  name: Unity Windows\n\nsteps:\n- task: UnityTestTask@1\n  name: unitytest\n  inputs:\n    testMode: editMode\n\n- script: |\n    echo $(unitytest.testResultsOutputPathAndFileName)\n")),Object(r.b)("h3",{id:"classic-pipeline-editor"},"Classic Pipeline Editor"),Object(r.b)("p",null,"The classic (visual) editor for Azure Pipelines provides input fields for configuring the task. In the simple example below, we set ",Object(r.b)("inlineCode",{parentName:"p"},"Test mode")," to ",Object(r.b)("inlineCode",{parentName:"p"},"Edit Mode"),", that means we are running tests that will also include the Unity Editor assembly and APIs. This is e.g. useful when testing editor extensions. We are also assigning a ",Object(r.b)("inlineCode",{parentName:"p"},"Reference name")," to the task, so we can use it to refernce the output variables in the variables list in other tasks of the pipeline. E.g. to get the value of the ",Object(r.b)("inlineCode",{parentName:"p"},"testResultsOutputPathAndFileName")," output variable and insert it into any other input field of a task we can then use ",Object(r.b)("inlineCode",{parentName:"p"},"$(unitytest.testResultsOutputPathAndFileName)"),". Everything else we are leaving at the defaults."),Object(r.b)("p",null,Object(r.b)("img",{alt:"Classic Pipeline Designer Task Configuration",src:n(141).default})),Object(r.b)("hr",null),Object(r.b)("h2",{id:"log"},"Log"),Object(r.b)("p",null,"When run and successful the task will provide log output similar to this:"),Object(r.b)("p",null,Object(r.b)("img",{alt:"Task Log",src:n(142).default})))}c.isMDXComponent=!0},92:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return h}));var a=n(0),i=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var u=i.a.createContext({}),c=function(e){var t=i.a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},b=function(e){var t=c(e.components);return i.a.createElement(u.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},d=i.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),b=c(n),d=a,h=b["".concat(l,".").concat(d)]||b[d]||p[d]||r;return n?i.a.createElement(h,o(o({ref:t},u),{},{components:n})):i.a.createElement(h,o({ref:t},u))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,l=new Array(r);l[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var u=2;u<r;u++)l[u]=n[u];return i.a.createElement.apply(null,l)}return i.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"}}]);